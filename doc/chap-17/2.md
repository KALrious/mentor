Dans cette leçon on va prendre en main Elastic Beanstalk. EBS va permettre de créer une première application back-end en NodeJs sur le cloud.

#EBS

Au cours de ce chapitre on utilisera l'interface pour déployer et créer notre infrastructure. La première chose à faire est de créer une application sur EBS ici (lien).

Dans notre application on aura l'occasion de configurer plusieur environnement. Dans cette leçon on se contentera de créer un seul environnement. Mais on pourrait imaginer en créer plusieurs avec un environnement de test pour les développements en cours et un environnement de production à la disponibilité de l'utilisateur.

On va renseigner le nom de l'application: mentor et le nom de l'environnement. On peut renseigner le nom de domaine, mais ce n'est pas obligatoire.

J'encourage de créer des tags sur tout les resources crée sur AWS, cela permet notamment de monitorer chaque partie de ça facturation.

Il faut choisir une plateforme managé en NodeJs sur une version de node au moins de 20.

Ensuite on créée une sample application.

#IAM

Avant de pouvoir terminer la création de notre environnement il faut d'abords créer des rôles IAM. Ce sont des resources qui vont permettre de donner des pouvoirs de connexion et de configuration soit à un utilisateur, soit à une autre resource.

EBS étant un service qui manage d'autre service comme EC2, il a besoin de ses différents pouvoir.

Pour créer les rôles nécéssaires au fonctionnement d'EBS il faut aller sur IAM ici (lien).

On va commencer par créer l'instance profile en créant un nouvel user dans la section users. On peut le nommer EBS-mentor et ensuite lui rajouter des permessions spécifiques. Pour rajouter ces permissions on va cliquer sur "attach policies directly" et va venir sélectionner les 4 policies suivantes.

- AdministratorAccess
- AWSElasticBeanstalkMulticontainerDocker
- AWSElasticBeanstalkWebTier
- AWSElasticBeanstalkWorkerTier

Une policy est un ensemble de droit donnant des pouvoir de Read et ou Write sur certaine resource d'AWS.

Après avoir créée notre user on va créer et lui associer un rôle. Pour cela il faut cliquer sur create rôle et choisir AWS service use case EC2.

On va venir rajouter exactement les même policy à ce rôle qu'à notre user. On va nommer ce rôle EBS-mentor-rôle. Pour l'associer à notre utilisateur créée précédement il faut sélectionner le rôle créée et edit trust-relationship. On va ensuite associé l'ARN du user crée au sein du rôle.

#Finaliser EBS

On peut maintenant associé les deux resources créées précédemment. Et ensuite peut créer notre environnement et notre application en laissant les valeurs par défaut.

Une fois que l'instance a bien été créée on peut cliquer sur l'url qui a été automatiquement à notre environnement pour tomber sur notre application d'exemple déployer sur le cloud.
